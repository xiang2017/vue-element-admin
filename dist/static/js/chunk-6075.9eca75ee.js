(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6075"],{MSNs:function(t,e,a){"use strict";a.d(e,"b",function(){return l}),a.d(e,"a",function(){return r});var n=a("t3Un"),i=a("zqLv");function r(t){return Object(n.a)({url:"/image_token",method:"get",params:{name:t}})}function l(t,e,a,r){console.log(t),Object(n.a)({url:"/image_token",method:"get",params:{name:t.name}}).then(function(n){var l=n.data.qiniu_url;i.upload(t,n.data.qiniu_key,n.data.qiniu_token,{fname:t.name,params:{},mimeType:t.type},{useCdnDomain:!1}).subscribe({next:function(t){r&&r(t)},error:function(t){a&&a(t)},complete:function(t){e&&e(t,l)}})}).catch(function(t){a&&a(t)})}},NM0R:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"c",function(){return r}),a.d(e,"d",function(){return l}),a.d(e,"b",function(){return o});var n=a("t3Un");function i(t){return Object(n.a)({url:"/labels",method:"get",params:t})}function r(t){return Object(n.a)({url:"/label",method:"post",data:t})}function l(t){return Object(n.a)({url:"/show_label/"+t,method:"post"})}function o(t){return Object(n.a)({url:"/hide_label/"+t,method:"post"})}},"VNq/":function(t,e,a){"use strict";a.r(e);var n=a("NM0R"),i=a("MSNs"),r={name:"ImgUploader",props:["value"],data:function(){return{info:"选择图片"}},methods:{onUpload:function(t){var e=this;t.target.files.length<1||Object(i.b)(t.target.files[0],function(t,a){e.$emit("input",a)},function(t){console.error(t)})}}},l=a("KHd+"),o=Object(l.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{display:"inline-block","vertical-align":"top"}},[e("el-button",{staticStyle:{position:"relative","vertical-align":"top"}},[this._v("\n    "+this._s(this.info)+"\n    "),e("input",{staticStyle:{opacity:"0",cursor:"pointer",position:"absolute",left:"0",top:"0",width:"92px",height:"33px",padding:"0",border:"0"},attrs:{type:"file",accept:"image/png,image/gif,image/jpeg,image/jpg"},on:{change:this.onUpload}})]),this._v(" "),e("img",{directives:[{name:"show",rawName:"v-show",value:this.value,expression:"value"}],staticStyle:{height:"60px","margin-left":"15px","vertical-align":"top","border-radius":"3px"},attrs:{src:this.value}})],1)},[],!1,null,null,null);o.options.__file="Uploader.vue";var s={name:"Label",components:{uploader:o.exports},data:function(){return{labels:[],params:{page:0},currentLabel:{id:"",name:"",avatar:""},editing:!1}},mounted:function(){this.getData(0)},methods:{getData:function(t){var e=this;this.params.page=t,Object(n.a)(this.params).then(function(t){e.labels=[],t.data.forEach(function(t){e.labels.push(t)})}).catch(function(t){console.error(t)})},addLabel:function(){this.currentLabel.id=0,this.currentLabel.name="",this.currentLabel.avatar="",this.editing=!0},editLabel:function(t){this.currentLabel.id=t.id,this.currentLabel.name=t.name,this.currentLabel.avatar=t.avatar,this.editing=!0},saveLabel:function(){var t=this;Object(n.c)(this.currentLabel).then(function(e){t.$message({message:"保存成功"}),t.editing=!1,t.getData(0)}).catch(function(e){console.error(e),t.$message({message:"error",type:"error"})})},showLabel:function(t){var e=this;Object(n.d)(t.id).then(function(a){t.show_in_list=!0,e.$message({message:"保存成功"})}).catch(function(t){console.error(t),e.$message({message:"error",type:"error"})})},hideLabel:function(t){var e=this;Object(n.b)(t.id).then(function(a){t.show_in_list=!1,e.$message({message:"保存成功"})}).catch(function(t){console.error(t),e.$message({message:"error",type:"error"})})}}},c=(a("z1bn"),Object(l.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addLabel}},[t._v("新增Label")]),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.labels,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.editLabel(e.row)}}},[t._v("编辑")]),t._v(" "),e.row.show_in_list?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){t.hideLabel(e.row)}}},[t._v("隐藏")]):t._e(),t._v(" "),e.row.show_in_list?t._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.showLabel(e.row)}}},[t._v("显示")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.editing,title:"编辑 Label",width:"500px"},on:{"update:visible":function(e){t.editing=e}}},[a("el-form",{attrs:{model:t.currentLabel,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标签ID"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!0},model:{value:t.currentLabel.id,callback:function(e){t.$set(t.currentLabel,"id",e)},expression:"currentLabel.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"填写标签名"},model:{value:t.currentLabel.name,callback:function(e){t.$set(t.currentLabel,"name",e)},expression:"currentLabel.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图标"}},[a("uploader",{model:{value:t.currentLabel.avatar,callback:function(e){t.$set(t.currentLabel,"avatar",e)},expression:"currentLabel.avatar"}})],1)],1),t._v(" "),a("div",{staticClass:"fialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.editing=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.saveLabel}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null));c.options.__file="index.vue";e.default=c.exports},XD55:function(t,e,a){},z1bn:function(t,e,a){"use strict";var n=a("XD55");a.n(n).a}}]);